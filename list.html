<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Student Planner</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      background-size: 400% 400%;
      animation: gradientMove 20s ease infinite;
      color: #fff;
      min-height: 100vh;
      padding: 20px;
      transition: background 0.5s ease;
    }

    body.blue-theme {
      background: linear-gradient(-45deg, #2196f3, #00bcd4, #1a237e, #0d47a1);
    }

    body.pink-theme {
      background: linear-gradient(-45deg, #ff4081, #f50057, #ec407a, #f06292);
    }

    @keyframes gradientMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
      text-shadow: 2px 2px 6px rgba(0,0,0,0.4);
    }

    .section {
      margin-bottom: 40px;
      background: rgba(255,255,255,0.1);
      padding: 20px;
      border-radius: 10px;
      backdrop-filter: blur(5px);
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }

    .section h2 {
      margin-bottom: 15px;
      border-bottom: 1px solid rgba(255,255,255,0.3);
      padding-bottom: 5px;
    }

    .color-button {
      position: fixed;
      top: 10px;
      height: 40px;
      padding: 0 15px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      color: white;
      font-weight: bold;
      cursor: pointer;
      z-index: 999;
    }

    #blueButton {
      right: 80px;
      background-color: #1976d2;
    }

    #pinkButton {
      right: 10px;
      background-color: #e91e63;
    }

    .checklist-item {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }

    .checklist-item input[type="checkbox"] {
      margin-right: 10px;
      transform: scale(1.2);
    }

    .checklist-item input[type="text"] {
      flex: 1;
      background: transparent;
      border: none;
      border-bottom: 1px solid #ccc;
      color: #fff;
      font-size: 1rem;
      outline: none;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
    }

    .calendar-cell {
      border: 1px solid rgba(255,255,255,0.2);
      padding: 10px;
      min-height: 80px;
      border-radius: 6px;
      background: rgba(0,0,0,0.2);
      position: relative;
      cursor: pointer;
    }

    .calendar-cell:hover {
      background: rgba(255,255,255,0.1);
    }

    .calendar-cell .date {
      font-weight: bold;
      font-size: 0.9rem;
    }

    .event {
      font-size: 0.8rem;
      margin-top: 5px;
      background: #fff2;
      padding: 2px 5px;
      border-radius: 4px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      padding: 8px;
      border: 1px solid rgba(255,255,255,0.2);
      text-align: center;
    }

    input[type="text"].routine {
      background: transparent;
      border: none;
      color: white;
      width: 100%;
      outline: none;
    }

    .modal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #1a1a2e;
      padding: 20px;
      border-radius: 10px;
      display: none;
      z-index: 999;
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
    }

    .modal input {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      border: none;
      border-radius: 5px;
    }

    .modal button {
      margin-top: 10px;
      padding: 8px 12px;
      border: none;
      border-radius: 5px;
      background: #2196f3;
      color: white;
      cursor: pointer;
    }

    .overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.6);
      z-index: 998;
      display: none;
    }
  </style>
</head>
<body>
  <button id="blueButton" class="color-button">Blue</button>
  <button id="pinkButton" class="color-button">Pink</button>

  <h1>üìö Student Productivity Dashboard</h1>

  <!-- Top 20 Checklist -->
  <div class="section">
    <h2>üìù Top 20 Things To Do</h2>
    <div id="checklist"></div>
  </div>

  <!-- Calendar -->
  <div class="section">
    <h2>üìÖ Calendar</h2>
    <div class="calendar-grid" id="calendar"></div>
  </div>

  <!-- Routine -->
  <div class="section">
    <h2>üìò Daily Routine (Custom Time)</h2>
    <table id="routine-table">
      <thead>
        <tr><th>Time</th><th>Task</th><th>Done</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- Modal for calendar events -->
  <div class="overlay" id="overlay"></div>
  <div class="modal" id="modal">
    <h3>Add Event</h3>
    <input type="text" id="eventInput" placeholder="e.g. John's Birthday">
    <button onclick="saveEvent()">Save</button>
  </div>

  <script>
    // Theme logic
    const body = document.body;
    const blueBtn = document.getElementById("blueButton");
    const pinkBtn = document.getElementById("pinkButton");

    const savedTheme = localStorage.getItem("selectedTheme");
    if (savedTheme) {
      body.classList.add(savedTheme);
    } else {
      body.classList.add("blue-theme");
    }

    blueBtn.onclick = () => {
      body.classList.remove("pink-theme");
      body.classList.add("blue-theme");
      localStorage.setItem("selectedTheme", "blue-theme");
    };

    pinkBtn.onclick = () => {
      body.classList.remove("blue-theme");
      body.classList.add("pink-theme");
      localStorage.setItem("selectedTheme", "pink-theme");
    };

    // Checklist (20 items)
    const checklistEl = document.getElementById("checklist");
    let checklist = JSON.parse(localStorage.getItem("checklist")) || Array(20).fill({ text: "", checked: false });

    checklist.forEach((item, i) => {
      const div = document.createElement("div");
      div.className = "checklist-item";

      const checkbox = document.createElement("input");
      checkbox.type = "checkbox";
      checkbox.checked = item.checked;
      checkbox.addEventListener("change", () => {
        checklist[i].checked = checkbox.checked;
        saveChecklist();
      });

      const input = document.createElement("input");
      input.type = "text";
      input.value = item.text;
      input.placeholder = `Task ${i + 1}`;
      input.addEventListener("input", () => {
        checklist[i].text = input.value;
        saveChecklist();
      });

      div.appendChild(checkbox);
      div.appendChild(input);
      checklistEl.appendChild(div);
    });

    function saveChecklist() {
      localStorage.setItem("checklist", JSON.stringify(checklist));
    }

    // Calendar
    const calendar = document.getElementById("calendar");
    const modal = document.getElementById("modal");
    const overlay = document.getElementById("overlay");
    const eventInput = document.getElementById("eventInput");

    let selectedDate = "";
    let events = JSON.parse(localStorage.getItem("calendarEvents")) || {};

    for (let i = 1; i <= 30; i++) {
      const cell = document.createElement("div");
      cell.className = "calendar-cell";
      cell.innerHTML = `<div class="date">${i}</div>`;

      if (events[i]) {
        cell.innerHTML += `<div class="event">${events[i]}</div>`;
      }

      cell.onclick = () => {
        selectedDate = i;
        eventInput.value = events[i] || "";
        overlay.style.display = modal.style.display = "block";
      };

      calendar.appendChild(cell);
    }

    function saveEvent() {
      const value = eventInput.value.trim();
      if (value) {
        events[selectedDate] = value;
      } else {
        delete events[selectedDate];
      }
      localStorage.setItem("calendarEvents", JSON.stringify(events));
      location.reload();
    }

    overlay.onclick = () => {
      modal.style.display = overlay.style.display = "none";
    };

    // Routine
    const routineTable = document.querySelector("#routine-table tbody");
    let routineData = JSON.parse(localStorage.getItem("routineData")) || Array(15).fill({ time: "", task: "", done: false });

    routineData.forEach((entry, i) => {
      const row = document.createElement("tr");

      const timeCell = document.createElement("td");
      const timeInput = document.createElement("input");
      timeInput.type = "text";
      timeInput.className = "routine";
      timeInput.placeholder = "e.g. 7:00 AM";
      timeInput.value = entry.time;
      timeInput.addEventListener("input", () => {
        routineData[i].time = timeInput.value;
        saveRoutine();
      });
      timeCell.appendChild(timeInput);

      const taskCell = document.createElement("td");
      const taskInput = document.createElement("input");
      taskInput.type = "text";
      taskInput.className = "routine";
      taskInput.placeholder = "Enter task";
      taskInput.value = entry.task;
      taskInput.addEventListener("input", () => {
        routineData[i].task = taskInput.value;
        saveRoutine();
      });
      taskCell.appendChild(taskInput);

      const doneCell = document.createElement("td");
      const checkbox = document.createElement("input");
      checkbox.type = "checkbox";
      checkbox.checked = entry.done;
      checkbox.addEventListener("change", () => {
        routineData[i].done = checkbox.checked;
        saveRoutine();
      });
      doneCell.appendChild(checkbox);

      row.appendChild(timeCell);
      row.appendChild(taskCell);
      row.appendChild(doneCell);
      routineTable.appendChild(row);
    });

    function saveRoutine() {
      localStorage.setItem("routineData", JSON.stringify(routineData));
    }
  </script>
</body>
</html>
